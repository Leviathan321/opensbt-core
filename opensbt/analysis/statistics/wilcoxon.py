from math import sqrt
import numpy as np
from numpy import mean
from numpy import var
from scipy.stats import wilcoxon
from opensbt.analysis.statistics import vargha_delaney
from opensbt.analysis.statistics.cohend import cohend
import logging as log

def run_wilcoxon_and_cohend(data1, data2):
    w_statistic, pvalue = wilcoxon(data1, data2) #method='auto')
    cohensd = cohend(data1, data2)
    log.info(f"P-Value is: {pvalue}")
    log.info(f"Cohen's D is: {cohensd}")
    return pvalue, cohensd[0]

def run_wilcoxon_and_delaney(data1, data2):
    w_statistic, pvalue = wilcoxon(data1, data2) #method='auto')
    delaney = vargha_delaney.VD_A(data1, data2)
    log.info(f"P-Value is: {pvalue}")
    log.info(f"Delaney's effect size is: {delaney}")
    return pvalue, delaney[0]

def main():
    # data1 =  # first distribution
    # data2 =  # second distribution
    data1 = [0.18184417518118298, 0.2245256586915804, 0.17647426490463292, 0.16230448654974916, 0.18738405941240882, 0.3101233019449206, 0.3054707753488759, 0.27873281142439615, 0.25083069533060276, 0.1612208601808664]
    data2 = [0.0753816102665673, 0.06437859231871611, 0.0666155505693268, 0.07059016975382326, 0.07065245326751085, 0.06454400375044805, 0.07402294266750688, 0.07003813819778802, 0.0687958141591721, 0.07122835191659796]

    ######### HV

    # NLSGAII
    data1_hv = [0.6295998159177707, 0.6911753093973988, 0.7099779729388581, 0.7292281280094995, 0.7391479860530838, 0.7537843026342296, 0.7621049633318954, 0.769150506299763, 0.7783872681251676, 0.7839092494319306]
    # NSGAII
    data2_hv = [0.5635319560946654, 0.6199147522290093, 0.686541107936581, 0.7080793073446771, 0.717467995334258, 0.7281786595545983, 0.737022956993821, 0.7521310150204069, 0.7607595186139952, 0.768661742597555]
    # NSGAII-F
    data3_hv = [0.5396809548281148,0.6224332448898264,0.6569083564023851,0.6921943345501635,0.7042235764412599,0.7065075901770288,0.7136041160066752,0.7194143078895124,0.7238166439422896,0.729033186164389]

    ######### GD

    # NLSGAII
    data1_gd = [0.34131648895475586,0.2395988732363851,0.22558330124876264,0.21263582776132273,0.20484597481044736,0.17196021602941186,0.16732330754447933,0.15763516217793905,0.15616857775870446,0.1479729194345742]
    # NSGAII
    data2_gd = [0.42408909030682496,0.31214628816839873,0.26753632431673746,0.2529986416277096,0.2457572991742356,0.23866258598892207,0.22377919149564196,0.2152845481865599,0.2058838700302954,0.16599420016179833]
    # NSGAII-F
    data3_gd = [0.4825037681025062,0.3654172847527959,0.3505811174191405,0.34180812998403454,0.3417765682624896,0.30482369596778164,0.2735045425503745,0.27468499726794926,0.26009500899997684,0.256074685158405]

    ######### IGD

    # NLSGAII
    data1_igd = [0.34131648895475586,0.2395988732363851,0.22558330124876264,0.21263582776132273,0.20484597481044736,0.17196021602941186,0.16732330754447933,0.15763516217793905,0.15616857775870446,0.1479729194345742]
    # NSGAII
    data2_igd = [0.42408909030682496,0.31214628816839873,0.26753632431673746,0.2529986416277096,0.2457572991742356,0.23866258598892207,0.22377919149564196,0.2152845481865599,0.2058838700302954,0.16599420016179833]
    # NSGAII-F
    data3_igd = [0.4825037681025062,0.3654172847527959,0.3505811174191405,0.34180812998403454,0.3417765682624896,0.30482369596778164,0.2735045425503745,0.27468499726794926,0.26009500899997684,0.256074685158405]

    ######### SP

    # NLSGAII
    data1_sp = [0.2440558993528536,0.17964382126112566,0.1520185467629521,0.13658442888091035,0.1260207425641434,0.10636321026119563,0.10597079903007886,0.08380229731269005,0.08410643463325196,0.08005802614504465]
    # NSGAII
    data2_sp = [0.21486047488929794,0.1776538587275294,0.1540528462884975,0.1468521299544237,0.13527934247416556,0.12606303859588125,0.11139781033353698,0.10637527093254433,0.09508757054354008,0.08911572220839624]
    # NSGAII-F
    data3_sp = [0.43783089567521055,0.2972691987986587,0.23225866440999243,0.22948390638038313,0.23953558979095152,0.16624534210822733,0.17682267225448586,0.15973611379990021,0.13063309093982736,0.1430303051787553]

    ######### GD

    log.info("######## Evaluation HV #####")
    log.info(f"NSGAII")
    run_wilcoxon_and_delaney(data1_hv, data2_hv)

    log.info(f"NSGAII_F")
    run_wilcoxon_and_delaney(data1_hv, data3_hv)


    log.info("######## Evaluation GD #####")
    log.info(f"NSGAII")
    run_wilcoxon_and_delaney(data1_gd, data2_gd)

    log.info(f"NSGAII_F")
    run_wilcoxon_and_delaney(data1_gd, data3_gd)

    log.info("######## Evaluation IGD #####")
    log.info(f"NSGAII")
    run_wilcoxon_and_delaney(data1_igd, data2_igd)

    log.info(f"NSGAII_F")
    run_wilcoxon_and_delaney(data1_igd, data3_igd)


    log.info("######## Evaluation SP #####")
    log.info(f"NSGAII")
    run_wilcoxon_and_delaney(data1_sp, data2_sp)

    log.info(f"NSGAII_F")
    run_wilcoxon_and_delaney(data1_sp, data3_sp)


if __name__ == '__main__':
    main()